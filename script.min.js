function SwitchImagePreview(e,t){if(PreviewImage.children[e]){for(const t of PreviewImage.children)t.style.opacity=t.attributes.id.value==e?1:0;ViewName.innerText=t,ActiveImageId=e}}function UpdateImagePosition(){const e=100;if(!(PreviewImage.children.length<1)){var t=PreviewImage.children[ActiveImageId].getBoundingClientRect();DragOffsetX>window.innerWidth-e&&(DragOffsetX=window.innerWidth-e),DragOffsetX+t.width<e&&(DragOffsetX=-t.width+e),DragOffsetY>window.innerHeight-e&&(DragOffsetY=window.innerHeight-e),DragOffsetY+t.height<e&&(DragOffsetY=-t.height+e),PreviewImage.style.translate=DragOffsetX+"px "+DragOffsetY+"px"}}function DragImage(e,t){DragActive&&(DragOffsetX+=e,DragOffsetY+=t,UpdateImagePosition())}function ZoomImage(e){if(!(PreviewImage.children.length<1)){var t=1;if(e>0){if(ImageScale<=.025)return;t*=.9}else t=1.1;ImageScale*=t;var a=PreviewImage.children[ActiveImageId].getBoundingClientRect(),n=a.width*t-a.width,i=a.height*t-a.height,r=(CursorPosX-DragOffsetX)/a.width,s=(CursorPosY-DragOffsetY)/a.height;DragOffsetX-=n*r,DragOffsetY-=i*s,UpdateImagePosition(),PreviewImage.style.transform="scale("+ImageScale+")"}}function ProcessInput(e,t=!1){var a=document.getElementById("fileSelect");a.innerText="Add more images",a.classList.add("addMore");for(let a=0;a<e.length;a++){var n=new FileReader;n.onload=function(n){var i=document.createElement("div");i.setAttribute("id",TotalImageCount),t?i.setAttribute("name",`Clipboard ${TotalImageCount}`):i.setAttribute("name",e[a].name),IMGs.appendChild(i);var r=document.createElement("img");r.setAttribute("id",TotalImageCount),r.setAttribute("src",n.target.result),PreviewImage.appendChild(r),i.addEventListener("mouseover",e=>{SwitchImagePreview(i.attributes.id.value,i.attributes.name.value)}),TotalImageCount++},n.readAsDataURL(e[a])}}var IMGs=document.getElementById("IMGs"),PreviewImage=document.getElementById("image"),ViewName=document.getElementById("viewName"),DragActive=!1,DragOffsetX=0,DragOffsetY=0,ImageScale=1,CursorPosX=0,CursorPosY=0,ActiveImageId=0,TotalImageCount=0,input=document.createElement("input");input.type="file",input.multiple=!0,input.onchange=(e=>ProcessInput(e.target.files)),window.addEventListener("paste",e=>ProcessInput(e.clipboardData.files,!0)),window.addEventListener("drop",e=>{e.preventDefault(),ProcessInput(e.dataTransfer.files)}),document.addEventListener("dragover",function(e){e.preventDefault()}),document.getElementById("fileSelect").addEventListener("click",e=>{input.click()}),IMGs.addEventListener("mousedown",e=>{e.preventDefault(),DragActive=!0}),IMGs.addEventListener("mouseup",e=>{e.preventDefault(),DragActive=!1}),IMGs.addEventListener("mousemove",e=>{e.preventDefault(),DragImage(e.movementX,e.movementY)}),IMGs.addEventListener("wheel",e=>{e.preventDefault(),ZoomImage(e.deltaY)}),document.addEventListener("mousemove",e=>{e.preventDefault(),CursorPosX=e.clientX,CursorPosY=e.clientY});