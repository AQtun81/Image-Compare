function SwitchImagePreview(e,t){if(PreviewImage.children[e]){for(const t of PreviewImage.children)t.style.opacity=t.attributes.id.value==e?1:0;ViewName.innerText=t,ActiveImageId=e}}function UpdateImagePosition(){const e=100;if(!(PreviewImage.children.length<1)){var t=PreviewImage.children[ActiveImageId].getBoundingClientRect();DragOffsetX>window.innerWidth-e&&(DragOffsetX=window.innerWidth-e),DragOffsetX+t.width<e&&(DragOffsetX=-t.width+e),DragOffsetY>window.innerHeight-e&&(DragOffsetY=window.innerHeight-e),DragOffsetY+t.height<e&&(DragOffsetY=-t.height+e),PreviewImage.style.translate=DragOffsetX+"px "+DragOffsetY+"px"}}function DragImage(e,t){DragActive&&(DragOffsetX+=e,DragOffsetY+=t,UpdateImagePosition())}function ZoomImage(e){if(!(PreviewImage.children.length<1)){var t=1;if(e>0){if(ImageScale<=.25)return;t*=.9}else t=1.1;ImageScale*=t;var a=PreviewImage.children[ActiveImageId].getBoundingClientRect(),i=a.width*t-a.width,n=a.height*t-a.height,r=(CursorPosX-DragOffsetX)/a.width,s=(CursorPosY-DragOffsetY)/a.height;DragOffsetX-=i*r,DragOffsetY-=n*s,UpdateImagePosition(),PreviewImage.style.transform="scale("+ImageScale+")"}}function ProcessInput(e,t=!1){document.getElementById("fileSelect").style.display="none";for(let i=0;i<e.length;i++){var a=new FileReader;a.onload=function(a){var n=document.createElement("div");n.setAttribute("id",TotalImageCount),t?n.setAttribute("name",`Clipboard ${TotalImageCount}`):n.setAttribute("name",e[i].name),IMGs.appendChild(n);var r=document.createElement("img");r.setAttribute("id",TotalImageCount),r.setAttribute("src",a.target.result),PreviewImage.appendChild(r),n.addEventListener("mouseover",e=>{SwitchImagePreview(n.attributes.id.value,n.attributes.name.value)}),TotalImageCount++},a.readAsDataURL(e[i])}}var IMGs=document.getElementById("IMGs"),PreviewImage=document.getElementById("image"),ViewName=document.getElementById("viewName"),DragActive=!1,DragOffsetX=0,DragOffsetY=0,ImageScale=1,CursorPosX=0,CursorPosY=0,ActiveImageId=0,TotalImageCount=0,input=document.createElement("input");input.type="file",input.multiple=!0,input.onchange=(e=>ProcessInput(e.target.files)),window.addEventListener("paste",e=>ProcessInput(e.clipboardData.files,!0)),document.getElementById("fileSelect").addEventListener("click",e=>{input.click()}),IMGs.addEventListener("mousedown",e=>{DragActive=!0}),IMGs.addEventListener("mouseup",e=>{DragActive=!1}),IMGs.addEventListener("mousemove",e=>{DragImage(e.movementX,e.movementY)}),IMGs.addEventListener("wheel",e=>{ZoomImage(e.deltaY)}),document.addEventListener("mousemove",e=>{CursorPosX=e.clientX,CursorPosY=e.clientY});