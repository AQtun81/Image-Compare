function SwitchImagePreview(e,t){if(PreviewImage.children[e]){for(const t of PreviewImage.children)t.style.opacity=t.attributes.id.value==e?1:0;ViewName.innerText=t,ActiveImageId=e}}function UpdateImagePosition(){const e=100;var t=PreviewImage.children[ActiveImageId].getBoundingClientRect();DragOffsetX>window.innerWidth-e&&(DragOffsetX=window.innerWidth-e),DragOffsetX+t.width<e&&(DragOffsetX=-t.width+e),DragOffsetY>window.innerHeight-e&&(DragOffsetY=window.innerHeight-e),DragOffsetY+t.height<e&&(DragOffsetY=-t.height+e),PreviewImage.style.translate=DragOffsetX+"px "+DragOffsetY+"px"}function DragImage(e,t){DragActive&&(DragOffsetX+=e,DragOffsetY+=t,UpdateImagePosition())}function ZoomImage(e){var t=1;if(e>0){if(ImageScale<=.25)return;t*=.9}else t=1.1;ImageScale*=t;var i=PreviewImage.children[ActiveImageId].getBoundingClientRect(),a=i.width*t-i.width,n=i.height*t-i.height,r=(CursorPosX-DragOffsetX)/i.width,s=(CursorPosY-DragOffsetY)/i.height;DragOffsetX-=a*r,DragOffsetY-=n*s,UpdateImagePosition(),PreviewImage.style.transform="scale("+ImageScale+")"}var IMGs=document.getElementById("IMGs"),PreviewImage=document.getElementById("image"),ViewName=document.getElementById("viewName"),DragActive=!1,DragOffsetX=0,DragOffsetY=0,ImageScale=1,CursorPosX=0,CursorPosY=0,ActiveImageId=0,input=document.createElement("input");input.type="file",input.multiple=!0,input.onchange=(e=>{document.getElementById("fileSelect").style.display="none";for(let a=0;a<e.target.files.length;a++){var t=new FileReader,i=e.target.files;t.onload=function(e){var t=document.createElement("div");t.setAttribute("id",a),t.setAttribute("name",i[a].name),IMGs.appendChild(t);var n=document.createElement("img");n.setAttribute("id",a),n.setAttribute("src",e.target.result),PreviewImage.appendChild(n),t.addEventListener("mouseover",e=>{SwitchImagePreview(t.attributes.id.value,t.attributes.name.value)})},t.readAsDataURL(e.target.files[a])}}),document.getElementById("fileSelect").addEventListener("click",e=>{input.click()}),IMGs.addEventListener("mousedown",e=>{DragActive=!0}),IMGs.addEventListener("mouseup",e=>{DragActive=!1}),IMGs.addEventListener("mousemove",e=>{DragImage(e.movementX,e.movementY)}),IMGs.addEventListener("wheel",e=>{ZoomImage(e.deltaY)}),document.addEventListener("mousemove",e=>{CursorPosX=e.clientX,CursorPosY=e.clientY});